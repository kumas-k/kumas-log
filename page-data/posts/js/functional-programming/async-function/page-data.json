{"componentChunkName":"component---src-templates-post-template-tsx","path":"/posts/js/functional-programming/async-function/","result":{"data":{"posts":{"edges":[{"node":{"id":"e60e56c2-f80a-541d-adc6-05e64b202bfe","html":"<h2>ë¹„ë™ê¸° ìƒí™©ì´ë€?</h2>\n<p>ë¹„ë™ê¸°ëŠ” ë™ì‹œì— ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>\n<p>ë”°ë¼ì„œ ìš”ì²­í•œ ê²°ê³¼ê°€ ë™ì‹œì— ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ì „ì— ì‘ì„±í•œ í•¨ìˆ˜ë“¤ì„ ë¹„ë™ê¸° ìƒí™©ì—ì„œë„ ì˜ ì‘ë™í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<h2>ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” go1</h2>\n<p>ê¸°ì¡´ì˜ ì‘ì„±í•˜ì˜€ë˜ goí•¨ìˆ˜ì— ë¹„ë™ê¸° ìƒí™©ì´ ë°œìƒí•˜ë„ë¡ ì½”ë“œë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">go(\n  1,\n  a =&gt; a + 10,\n  a =&gt; Promise.resolve(a + 100),\n  a =&gt; a + 1000,\n  console.log\n); // [object Promise]1000</code>\n        </deckgo-highlight-code>\n<p>ì¤‘ê°„ì˜ ë¹„ë™ê¸° ìƒí™©ì´ ë°œìƒ ì‹œì— ì˜ë„í•˜ì§€ ì•Šì€ ì—°ì‚°ìœ¼ë¡œ ê²°ê³¼ ê°’ì´ ì „ë‹¬ë©ë‹ˆë‹¤. go, pipie í•¨ìˆ˜ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ëª¨ë‘ reduce í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— reduce í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<h3>go1ì„ ì ìš©í•œ reduce</h3>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">// fx.js\n\n// const reduce = curry((f, acc, iter) =&gt; {\n//   if (!iter) {\n//     iter = acc[Symbol.iterator]();\n//     acc = iter.next().value;\n//   }\n//   for (const a of iter) {\n//     acc = f(acc, a);\n//   }\n//   return acc;\n// });\n\nconst go1 = (a, f) =&gt; (a instanceof Promise ? a.then(f) : f(a));\n\nconst reduce = curry((f, acc, iter) =&gt; {\n  if (!iter) {\n    iter = acc[Symbol.iterator]();\n    acc = iter.next().value;\n  } else {\n    iter = acc[Symbol.iterator]();\n  }\n\n  return go1(acc, function recur(acc) {\n    let cur;\n    while (!(cur = iter.next()).done) {\n      const a = cur.value;\n      acc = f(acc, a);\n      if (acc instanceof Promise) return acc.then(recur);\n    }\n    return acc;\n  });\n});</code>\n        </deckgo-highlight-code>\n<p>go1ì´ë¼ëŠ” ë©”ì„œë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ì´ ë©”ì„œë“œëŠ” instanceofë¥¼ ì´ìš©í•˜ì—¬ ì „ë‹¬ë°›ì€ ê°ì²´ê°€ Promiseì¸ì§€ ì²´í¬í•©ë‹ˆë‹¤. Promiseë¼ë©´ thení•œë’¤ ê°’ì„ ì „ë‹¬í•˜ê³  ì•„ë‹ˆë¼ë©´ ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ì‘ë™í•˜ë„ë¡ í•©ë‹ˆë‹¤.</p>\n<p>ë°˜ë³µë¬¸ìœ¼ë¡œ ì²˜ë¦¬ë˜ë˜ ë¶€ë¶„ì„ ìœ ëª… í•¨ìˆ˜ë¡œ ì„ ì–¸í•˜ì—¬ ë°˜ë³µí•˜ë„ë¡ í•©ë‹ˆë‹¤. ë˜í•œ forâ€¦ ofì—ì„œ whileìœ¼ë¡œ ë°”ë€Œì—ˆëŠ”ë°, forâ€¦ ofëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ë°˜ë³µì´ ì¢…ë£Œë˜ëŠ” ê²½ìš°ì—ëŠ” ì´í„°ë ˆì´í„°ì˜ ë¦¬í„´ ë©”ì„œë“œë¥¼ ê°•ì œë¡œ ì‹¤í–‰ì‹œì¼œë²„ë¦¬ê¸° ë•Œë¬¸ì— whileì„ ì‚¬ìš©í•˜ì—¬ ë°˜ë³µë¬¸ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>\n<h3>go1ì„ ì ìš©í•œ L.map</h3>\n<p>go1í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ mapí•¨ìˆ˜ë„ ë¹„ë™ê¸° ìƒí™©ì˜ ì½”ë“œë¥¼ ì‘ì„±í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">go(\n  [Promise.resolve(1), Promise.resolve(2), Promise.resolve(3)],\n  L.map(a =&gt; a + 10),\n  take(2),\n  console.log\n); // [&quot;[object Promise]10&quot;, &quot;[object Promise]10&quot;]</code>\n        </deckgo-highlight-code>\n<p>ìš°ë¦¬ê°€ ì˜ˆìƒí•œ ê²°ê³¼ê°’ì€ 11, 12ê°€ ë‚˜ì™€ì•¼í–ˆì—‡ì§€ë§Œ ì—‰ëš±í•œ ê°’ì´ ì¶œë ¥ ë˜ì—ˆìŠµë‹ˆë‹¤. í•´ë‹¹ ì—°ì‚°ì´ ì •ìƒì ìœ¼ë¡œ ë‚˜ì˜¬ìˆ˜ ìˆë„ë¡ í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">// fx.js\n\nL.map = curry(function* (f, iter) {\n  for (const a of iter) yield go1(a, f);\n});\n\ngo(\n  [Promise.resolve(1), Promise.resolve(2), Promise.resolve(3)],\n  L.map(a =&gt; a + 10),\n  take(2),\n  console.log\n); // [Promise, Promise]</code>\n        </deckgo-highlight-code>\n<p>mapí•¨ìˆ˜ë„ go1ì„ ì´ìš©í•˜ì—¬ ë¹„ë™ê¸° ìƒí™©ì—ì„œë„ ì •ìƒì ìœ¼ë¡œ ì—°ì‚°ì´ ë˜ë„ë¡ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì•„ì§ Promiseê°’ì„ ì¶œë ¥í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê²°ê´ê°’ì„ ë§Œë“¤ì–´ ë‚´ëŠ” takeí•¨ìˆ˜ë„ reduceí•¨ìˆ˜ì²˜ëŸ¼ ìˆ˜ì •í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">// fx.js\n\n// const take = curry((l, iter) =&gt; {\n//   let res = [];\n//   for (const a of iter) {\n//     res.push(a);\n//     if (res.length == l) return res;\n//   }\n//   return res;\n// });\nconst take = curry((l, iter) =&gt; {\n  let res = [];\n  iter = iter[Symbol.iterator]();\n  return (function recur() {\n    let cur;\n    while (!(cur = iter.next()).done) {\n      const a = cur.value;\n      if (a instanceof Promise) {\n        return a.then(a =&gt; {\n          res.push(a);\n          return res.length === l ? res : recur();\n        });\n      }\n      res.push(a);\n      if (res.length == l) return res;\n    }\n    return res;\n  })();\n});</code>\n        </deckgo-highlight-code>\n<h3>nopì„ ì´ìš©í•´ ë¹„ë™ê¸° ì²˜ë¦¬í•˜ëŠ” L.filter</h3>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">go(\n  [1, 2, 3, 4, 5],\n  L.map(a =&gt; Promise.resolve(a * a)),\n  L.filter(a =&gt; {\n    console.log(a); // Promise {&lt;resolved&gt;: 1} ...\n    return a % 2;\n  }),\n  take(2),\n  console.log\n); // []</code>\n        </deckgo-highlight-code>\n<p>ì´ë²ˆì—” filterê¹Œì§€ ë¹„ë™ê¸° ìƒí™©ì„ ì˜ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½í•´ë³´ê² ìŠµë‹ˆë‹¤. ê¸°ì¡´ì˜ í•„í„° í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ìƒí™©ì„ ì²˜ë¦¬ ëª»í•˜ê¸° ë•Œë¬¸ì— ë¹„ì •ìƒì ì¸ ê°’ì„ ì¶œë ¥í•˜ê¸° ë•Œë¬¸ì— filterí•¨ìˆ˜ë¥¼ ìˆ˜ì •í•˜ì—¬ ë¹„ë™ê¸° ìƒí™©ì„ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">// fx.js\n\n// L.filter = curry(function* (f, iter) {\n//   for (const a of iter) {\n//     if (f(a)) yield a;\n//   }\n// });\n\nconst nop = Symbol(&#39;nop&#39;);\n\nL.filter = curry(function* (f, iter) {\n  for (const a of iter) {\n    const b = go1(a, f);\n    if (b instanceof Promise) yield b.then(b =&gt; b ? a : Promise.reject(nop));\n    else if (b) yield a;\n  }\n});\n\nconst take = curry((l, iter) =&gt; {\n  let res = [];\n  iter = iter[Symbol.iterator]();\n  return (function recur() {\n    let cur;\n    while (!(cur = iter.next()).done) {\n      const a = cur.value;\n      if (a instanceof Promise) {\n        return a\n          .then((a) =&gt; {\n            res.push(a);\n            return res.length === l ? res : recur();\n          })\n          .catch((e) =&gt; { // nop ì²˜ë¦¬ë¥¼ ìœ„í•´ ì¶”ê°€ëœ ë¶€ë¶„.\n            return e == nop ? recur() : Promise.reject(e);\n          });\n      }\n      res.push(a);\n      if (res.length == l) return res;\n    }\n    return res;\n  })();\n\n  go(\n  [1, 2, 3, 4, 5],\n  L.map(a =&gt; Promise.resolve(a * a)),\n  L.filter(a =&gt;  a % 2 ),\n  take(2),\n  console.log\n  ) // [1, 9]</code>\n        </deckgo-highlight-code>\n<p>ê¸°ì¡´ì˜ L.filter í•¨ìˆ˜ëŠ” ì´í„°ë ˆì´í„°ë¥¼ ë°˜ë³µí•˜ë©° í•¨ìˆ˜ ê²°ê´ê°’ì´ trueì¸ì§€ ì²´í¬í•œ ë’¤ ë°˜í™˜í•˜ë„ë¡ ë˜ì–´ ìˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì „ë‹¬ë°›ì€ í•¨ìˆ˜ê°€ Promiseë¼ë©´ ì •ìƒì ìœ¼ë¡œ ì—°ì‚°ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— go1 í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ì—°ì‚°í•©ë‹ˆë‹¤. ê·¸ ì´í›„ ì—°ì‚°ëœ ê°’ì´ Promise ì¸ì§€ ì²´í¬í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ L.filter í•¨ìˆ˜ì˜ íŠ¹ì„±ìƒ ì¡°ê±´ì— ë§ì§€ ì•ŠëŠ” ê°’ì€ ì „ë‹¬í•˜ì§€ ì•Šì•„ì•¼ í•˜ëŠ”ë°, ê·¸ë ‡ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ nopì´ë¼ëŠ” ì„ì˜ì˜ êµ¬ë¶„ìë¥¼ ìƒì„±í•©ë‹ˆë‹¤. nop êµ¬ë¶„ìëŠ” L.filterì—ì„œ ì „ë‹¬í•˜ì§€ ì•Šì•„ì•¼ í•˜ëŠ” ê°’ì´ë¼ë©´ Promise.rejectì„ ë°˜í™˜í•˜ë©° nop êµ¬ë¶„ìë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ ê²°ê³¼ì ìœ¼ë¡œ PromiseëŠ” ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ê¸° ë•Œë¬¸ì— í•´ë‹¹ ê°’ì„ ì „ë‹¬í•˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ê·¸ë ‡ë‹¤ë©´ take í•¨ìˆ˜ì—ì„œ nop êµ¬ë¶„ìë¥¼ ì²˜ë¦¬í•´ ì¤„ ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤. ê¸°ì¡´ì˜ thení•¨ìˆ˜ì— catch ë¶€ë¶„ì„ ì¶”ê°€í•˜ì—¬ í•´ë‹¹ ì—ëŸ¬ê°€ ì˜ë„í•œ ìƒí™©ì´ë©´ ë‹¤ìŒ ì½”ë“œë“¤ì„ í‰ê°€í•˜ë„ë¡ recur() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ì‹¤ì œ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤ë©´ ë‹¤ì‹œ reject(e)ì„ í†µí•˜ì—¬ ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼œ ì¤ë‹ˆë‹¤.</p>\n<h3>nop ì§€ì›í•˜ëŠ” reduce</h3>\n<p>reduce í•¨ìˆ˜ë„ takeí•¨ìˆ˜ì²˜ëŸ¼ nopì„ ì§€ì›í•˜ë„ë¡ ìˆ˜ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">go(\n  [1, 2, 3, 4, 5],\n  L.map(a =&gt; Promise.resolve(a * a)),\n  L.filter(a =&gt; Promise.resolve(a % 2)),\n  reduce((a, b) =&gt; a + b),\n  console.log\n); // 1[object Promise][object Promise][object Promise] Uncaugth (in promise) Symbol(nop)</code>\n        </deckgo-highlight-code>\n<p>ì¼ë‹¨ ì´ì „ì˜ ìˆ˜ì •í•œ reduceí•¨ìˆ˜ëŠ” ì²« ë²ˆì§¸ ì¸ìê°€ Promiseì¸ì§€ë§Œ ì²´í¬í•´ì„œ ê³„ì‚°í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ë¶€ë¶„ì„ ë§¤ë²ˆ Promiseë¥¼ ì²´í¬í•˜ì—¬ í’€ì–´ì¤„ ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•˜ê³  nopì„ ì˜ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">// fx.js\n\nconst reduceF = (acc, a, f) =&gt;\n  a instanceof Promise\n    ? a.then(\n        a =&gt; f(acc, a),\n        e =&gt; (e == nop ? acc : Promise.reject(e))\n      )\n    : f(acc, a);\n\nconst reduce = curry((f, acc, iter) =&gt; {\n  if (!iter) {\n    iter = acc[Symbol.iterator]();\n    acc = iter.next().value;\n  } else {\n    iter = acc[Symbol.iterator]();\n  }\n\n  return go1(acc, function recur(acc) {\n    let cur;\n    while (!(cur = iter.next()).done) {\n      // const a = cur.value;\n      // acc = f(acc, a);\n      acc = reduceF(acc, cur.value, f);\n      if (acc instanceof Promise) return acc.then(recur);\n    }\n    return acc;\n  });\n});</code>\n        </deckgo-highlight-code>\n<p>reduceFë¼ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ì „ë‹¬ë°›ì€ ê°’ì´ Promiseê°’ì¸ì§€ ì²´í¬í•˜ì—¬ thenìœ¼ë¡œ ì—°ì‚°í•˜ì—¬ í•¨ìˆ˜ë¥¼ ì ìš©ì„ í•´ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ë˜í•œ thenì„ ì²˜ë¦¬í•˜ë©´ì„œ catchë¥¼ í†µí•´ nop êµ¬ë¶„ìë„ ì²˜ë¦¬ë¥¼ í•´ì¤„ ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">go(\n  [1, 2, 3, 4, 5],\n  L.map(a =&gt; Promise.resolve(a * a)),\n  L.filter(a =&gt; Promise.resolve(a % 2)),\n  reduce((a, b) =&gt; a + b),\n  console.log\n); // 35</code>\n        </deckgo-highlight-code>\n<p>ì´ì „ì˜ ì‘ì„±í•œ ì½”ë“œë¥¼ ìƒˆë¡œ ì‹¤í–‰í•´ ë³´ë©´ ì •ìƒì ìœ¼ë¡œ ì˜ ì‘ë™í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h2>ì°¸ê³ </h2>\n<ul>\n<li><a href=\"https://www.inflearn.com/course/functional-es6\" target=\"_blank\" rel=\"nofollow\">í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ê³¼ JavaScript ES6+</a></li>\n</ul>","timeToRead":4,"frontmatter":{"title":"ğŸ™† ë¹„ë™ê¸° ìƒí™©ì—ì„œ ì˜ ì‘ë™í•˜ëŠ” í•¨ìˆ˜","date":"Nov 08, 2021","update":null,"tags":["javascript","functional"]}}}]}},"pageContext":{"slug":"/posts/js/functional-programming/async-function/"}},"staticQueryHashes":["196858978","3066419403","3159585216"]}